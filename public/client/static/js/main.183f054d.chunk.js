(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,e,n){t.exports=n(29)},22:function(t,e,n){},23:function(t,e,n){},27:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.colormap={},e.colormap[0]={color:null,background:null},e.colormap[30]={color:"black",background:null,bright:"gray"},e.colormap[31]={color:"red",background:null,bright:"crimson"},e.colormap[32]={color:"green",background:null,bright:"lime"},e.colormap[33]={color:"yellow",background:null,bright:"khaki"},e.colormap[34]={color:"blue",background:null,bright:"slateblue"},e.colormap[35]={color:"magenta",background:null,bright:"orchid"},e.colormap[36]={color:"cyan",background:null,bright:"lightcyan"},e.colormap[37]={color:"white",background:null,bright:"white"};for(var r=30;r<38;r++){var o=e.colormap[r];void 0!==o&&(e.colormap[r+10]={color:null,background:o.color,bright:o.bright})}},28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(4),i=n.n(a),s=(n(22),n(23),n(24),n(25),n(26),n(1)),l=n(2),c=n(7),u=n(5),h=n(8),d=n(31),m=n(6),p=(n(28),function(){function t(e){var n=this;Object(s.a)(this,t),this.socket=new WebSocket(e.uri),this.terminal=e.terminal,this.socket.onmessage=function(t){var e=t.data;try{var r=JSON.parse(e);switch(r.event){case"client/prompt":n.terminal.print(r.payload.prompt),n.terminal.setMask(r.payload.mask);break;case"client/print":n.terminal.print(r.payload);break;default:console.log("Unhandled event from server:",r)}}catch(o){}},this.terminal.addListener(function(t){1===n.socket.readyState&&""!==t&&void 0!==t&&n.socket.send(t)})}return Object(l.a)(t,[{key:"json",value:function(t){this.socket.send(JSON.stringify(t))}},{key:"event",value:function(t,e){this.json({event:t,payload:e})}},{key:"gmcp",value:function(t,e){this.event("gmcp",{module:t,data:e})}}]),t}()),v=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(u.a)(e).call(this,t))).state={buffer:[],input:"",prompt:"> ",mask:!1,listeners:[],history:[],hisCursor:0,maxLines:t.maxLines||1e3},n.input=o.a.createRef(),n.container=o.a.createRef(),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.socket=new p({uri:"gorgon.mudjs.net"===window.location.host?"wss://gorgon.mudjs.net/socket":"ws://localhost:5557",terminal:this})}},{key:"setMask",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.state;e.mask=t,this.setState(e)}},{key:"addListener",value:function(t){var e=this.state;e.listeners.push(t),this.setState(e)}},{key:"getLineCount",value:function(){var t=this.state,e=0,n=!0,r=!1,o=void 0;try{for(var a,i=t.buffer[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,l=!0,c=!1,u=void 0;try{for(var h,d=s[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){e+=h.value.text.split("\n").length}}catch(m){c=!0,u=m}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}catch(m){r=!0,o=m}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return e}},{key:"print",value:function(t){var e=this,n=this.state;t instanceof Array&&(t=t.join("\n")),t=Object(m.parseAnsi)(t,"white","#282c34");var r=n.buffer.length;t=t.map(function(t,e){return t.key="print-".concat(r,"-").concat(e),t}),n.buffer.push(t),this.getLineCount()>n.maxLines&&n.buffer.shift(),this.setState(n,function(){e.input.current.scrollIntoView({behavior:"smooth",block:"end"})})}},{key:"onClick",value:function(t){this.input.current.focus()}},{key:"onChange",value:function(t){var e=this.state;e.input=t.target.value,this.setState(e)}},{key:"onSubmit",value:function(){if(""!==this.state.input){var t=this.state.input;this.setInput(),this.onInput(t)}}},{key:"onKeyPress",value:function(t){switch(t.key){case"Enter":this.onSubmit();break;case"ArrowUp":this.onHistoryCurs(-1);break;case"ArrowDown":this.onHistoryCurs(1);break;case"Escape":this.setInput()}}},{key:"setInput",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.state;n.input=e,this.setState(n,function(){t.input.current.focus()})}},{key:"moveToEnd",value:function(t){var e=t.target.value;t.target.value="",t.target.value=e}},{key:"onHistoryCurs",value:function(t){var e=this.state;e.hisCursor+=t,e.hisCursor>e.history.length&&(e.hisCursor=0),e.hisCursor<0&&(e.hisCursor=e.history.length-1),this.setInput(e.history[e.hisCursor]),this.setState(e)}},{key:"onInput",value:function(t){if(this.state.mask)this.setMask();else{var e=this.state;e.history.push(t),e.hisCursor=e.history.length,this.setState(e),this.print(this.state.prompt+t)}var n=!0,r=!1,o=void 0;try{for(var a,i=this.state.listeners[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){(0,a.value)(t)}}catch(s){r=!0,o=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}},{key:"clear",value:function(){var t=this.state;t.buffer="",this.setState(t)}},{key:"setPrompt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"> ",e=this.state;e.prompt=t,this.setState(e)}},{key:"render",value:function(){return o.a.createElement("div",{ref:this.container,className:"terminal-container",onClick:this.onClick.bind(this),onKeyDown:this.onKeyPress.bind(this)},o.a.createElement("div",{className:"terminal-output terminal-text"},this.state.buffer.map(function(t,e){return o.a.createElement("span",{key:"print-".concat(e)},t.map(function(t){var e={color:t.color,backgroundColor:t.background,fontWeight:t.bold?"bold":"inherit",textDecoration:t.underline?"underline":"inherit"};return o.a.createElement("span",{key:t.key,style:e},t.text)}),"\n")})),o.a.createElement("div",{className:"terminal-input-container"},o.a.createElement("span",{className:"terminal-text terminal-prompt"},this.state.prompt),o.a.createElement("input",{autoFocus:!0,autoComplete:"new-password",type:this.state.mask?"password":"text",ref:this.input,className:["terminal-text",d.a.FILL,"terminal-input"].join(" "),value:this.state.input,onFocus:this.moveToEnd.bind(this),onChange:this.onChange.bind(this)})))}}]),e}(r.Component);var f=function(){return document.title="MOOts Client",o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("title",null,"MOOts Client"),o.a.createElement(v,{maxLines:1e3})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(27);e.parseAnsi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inherit",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inherit",o={color:e,background:n,bold:!1,underline:!1,text:t},a=[],i="",s=!1,l="";return function(t){return/\x1b\[(\d+);?(?:(\d+))?m/g.test(t)}(t)?(t.split("").forEach(function(t,c){if(s){if(l+=t,"m"===t){s=!1;var u=/\x1b\[(\d+);?(?:(\d+))?m/g.exec(l);if(null!==u){var h=Number(u[1]),d=void 0!==u[2];switch(h){case 0:o.background=n,o.color=e,o.bold=!1,o.underline=!1;break;case 1:o.bold=!0;break;case 4:o.underline=!0;break;case 7:var m=o.background,p=o.color;o.background=p,o.color=m;default:var v=r.colormap[h];void 0!==v&&(null!==v.background?d&&void 0!==v.bright?o.background=v.bright:o.background=v.background:null!==v.color&&(d&&void 0!==v.bright?o.color=v.bright:o.color=v.color))}}l=""}}else"\x1b"===t?(l+=t,s=!0,i.length>0&&(o.text=i,i="",a.push(Object.assign({},o)))):i+=t}),i.length>0&&(o.text=i,i="",a.push(Object.assign({},o))),a):[Object.assign({},o)]}}},[[16,1,2]]]);
//# sourceMappingURL=main.183f054d.chunk.js.map