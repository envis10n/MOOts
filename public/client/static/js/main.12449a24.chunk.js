(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,n){t.exports=n(27)},21:function(t,e,n){},22:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){"use strict";n.r(e);var s=n(0),a=n.n(s),i=n(4),r=n.n(i),o=(n(21),n(22),n(23),n(24),n(25),n(1)),u=n(2),c=n(6),l=n(5),h=n(7),p=n(29),m=(n(26),function(){function t(e){var n=this;Object(o.a)(this,t),this.socket=new WebSocket(e.uri),this.terminal=e.terminal,this.socket.onmessage=function(t){var e=t.data;try{var s=JSON.parse(e);switch(s.event){case"client/prompt":n.terminal.print(s.payload.prompt),n.terminal.setMask(s.payload.mask);break;case"client/print":n.terminal.print(s.payload);break;default:console.log("Unhandled event from server:",s)}}catch(a){}},this.terminal.addListener(function(t){1===n.socket.readyState&&""!==t&&void 0!==t&&n.socket.send(t)})}return Object(u.a)(t,[{key:"json",value:function(t){this.socket.send(JSON.stringify(t))}},{key:"event",value:function(t,e){this.json({event:t,payload:e})}},{key:"gmcp",value:function(t,e){this.event("gmcp",{module:t,data:e})}}]),t}()),v=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(c.a)(this,Object(l.a)(e).call(this,t))).state={buffer:"",input:"",prompt:"> ",mask:!1,listeners:[],history:[],hisCursor:0},n.input=a.a.createRef(),n.container=a.a.createRef(),n}return Object(h.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.socket=new m({uri:"gorgon.mudjs.net"===window.location.host?"wss://gorgon.mudjs.net/socket":"ws://localhost:5557",terminal:this})}},{key:"setMask",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.state;e.mask=t,this.setState(e)}},{key:"addListener",value:function(t){var e=this.state;e.listeners.push(t),this.setState(e)}},{key:"print",value:function(t){var e=this,n=this.state;""===n.buffer?n.buffer=t:n.buffer="".concat(n.buffer,"\n").concat(t),this.setState(n,function(){e.input.current.scrollIntoView({behavior:"smooth",block:"end"})})}},{key:"onClick",value:function(t){this.input.current.focus()}},{key:"onChange",value:function(t){var e=this.state;e.input=t.target.value,this.setState(e)}},{key:"onSubmit",value:function(){if(""!==this.state.input){var t=this.state.input;this.setInput(),this.onInput(t)}}},{key:"onKeyPress",value:function(t){switch(t.key){case"Enter":this.onSubmit();break;case"ArrowUp":this.onHistoryCurs(-1);break;case"ArrowDown":this.onHistoryCurs(1);break;case"Escape":this.setInput()}}},{key:"setInput",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.state;n.input=e,this.setState(n,function(){t.input.current.focus()})}},{key:"moveToEnd",value:function(t){var e=t.target.value;t.target.value="",t.target.value=e}},{key:"onHistoryCurs",value:function(t){var e=this.state;e.hisCursor+=t,e.hisCursor>e.history.length&&(e.hisCursor=0),e.hisCursor<0&&(e.hisCursor=e.history.length-1),this.setInput(e.history[e.hisCursor]),this.setState(e)}},{key:"onInput",value:function(t){if(this.state.mask)this.setMask();else{var e=this.state;e.history.push(t),e.hisCursor=e.history.length,this.setState(e),this.print(this.state.prompt+t)}var n=!0,s=!1,a=void 0;try{for(var i,r=this.state.listeners[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){(0,i.value)(t)}}catch(o){s=!0,a=o}finally{try{n||null==r.return||r.return()}finally{if(s)throw a}}}},{key:"clear",value:function(){var t=this.state;t.buffer="",this.setState(t)}},{key:"setPrompt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"> ",e=this.state;e.prompt=t,this.setState(e)}},{key:"render",value:function(){return a.a.createElement("div",{ref:this.container,className:"terminal-container",onClick:this.onClick.bind(this),onKeyDown:this.onKeyPress.bind(this)},a.a.createElement("div",{className:"terminal-output terminal-text"},this.state.buffer),a.a.createElement("div",{className:"terminal-input-container"},a.a.createElement("span",{className:"terminal-text terminal-prompt"},this.state.prompt),a.a.createElement("input",{autoFocus:!0,autoComplete:"new-password",type:this.state.mask?"password":"text",ref:this.input,className:["terminal-text",p.a.FILL,"terminal-input"].join(" "),value:this.state.input,onFocus:this.moveToEnd.bind(this),onChange:this.onChange.bind(this)})))}}]),e}(s.Component);var f=function(){return document.title="MOOts Client",a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("title",null,"MOOts Client"),a.a.createElement(v,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.12449a24.chunk.js.map